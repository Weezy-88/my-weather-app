<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65"
      crossorigin="anonymous"
    />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@1,100;1,500&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" type="text/css" href="src/styles.css" />
    <script src="https://cdn.jsdelivr.net/npm/axios@1.1.2/dist/axios.min.js"></script>

    <title>HW Week 2</title>
  </head>
  <body>
    <div class="container text-center">
      <img src="worldmap.svg" alt="" class="map" />
      <h1 class="city" id="city">London</h1>
      <h2>
        <div class="currentTemp" id="temperature">19Â°c</div>
      </h2>
      <h3>
        <div class="currentWeather" id="description">Sunny and Dry</div>
      </h3>
      <div class="row days">
        <div class="col">M</div>
        <div class="col">T</div>
        <div class="col">W</div>
        <div class="col">T</div>
        <div class="col">F</div>
      </div>
      <div class="row emoji">
        <div class="col">ðŸŒž</div>
        <div class="col">ðŸŒž</div>
        <div class="col">ðŸŒž</div>
        <div class="col">ðŸŒž</div>
        <div class="col">ðŸŒž</div>
      </div>
      <form id="search-form">
        <input
          class="search"
          type="search"
          placeholder="Search..."
          id="city-input"
        />
        <input class="submit" type="submit" placeholder="Find" />
      </form>
    </div>

    <script>
      function searchCity(city) {
        let apiKey = "3fdc8cfbf2d6fa0116c9ae92d3df4f79";
        let apiUrl = `https://api.openweathermap.org/data/2.5/weather?q=${city}&appid=${apiKey}&units=metric`;
        axios.get(apiUrl).then(displayWeatherCondition);
      }

      function displayWeatherCondition(response) {
        document.querySelector("#city").innerHTML = response.data.name;
        document.querySelector("#temperature").innerHTML = Math.round(
          response.data.main.temp
        );
        document.querySelector("#description").innerHTML =
          response.data.weather[0].main;
      }

      function handleSubmit(event) {
        event.preventDefault();
        let city = document.querySelector("#city-input").value;
        searchCity(city);
      }

      let searchForm = document.querySelector("#search-form");
      searchForm.addEventListener("submit", handleSubmit);
    </script>
  </body>
</html>
